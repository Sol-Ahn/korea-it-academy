<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Sub Layout Ex 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      #container {
        width: 1200px;
        margin: 0 auto;
      }

      header {
        width: 100%;
        height: 70px;
        background-color: #ff9380;
      }

      header figure {
        width: 350px;
        height: 70px;
        padding: 5px 0;
        float: right;
      }

      header figure img {
        width: 70px;
        height: 70px;
        float: left;
      }

      header figcaption {
        height: 70px;
        padding-top: 10px;
        padding-left: 10px;
        float: left;
      }

      figure figcaption h3 {
        font-size: 100%;
        line-height: 24px;
        color: black;
      }

      figure figcaption p {
        font-size: 80%;
        line-height: 24px;
      }

      figure a:link,
      figure a:visited {
        color: #363636;
        text-decoration: none;
      }

      figure a:hover,
      figure a:active {
        color: white;
      }

      #slider {
        width: 1200px;
        height: 600px;
        overflow: hidden;
        border-top: 2px solid #5f5f5f;
        border-bottom: 2px solid #5f5f5f;
        position: relative;
      }

      #slide {
        height: 600px;
      }

      #slide-container {
        width: 3600px;
        height: 600px;
      }

      #slide-container > div {
        width: 1200px;
        height: 600px;
        float: left;
      }

      .slide-img1 {
        background-image: url("/resources/img/pension1.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-size: 100% 100%;
      }

      .slide-img2 {
        background-image: url("/resources/img/pension2.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-size: 100% 100%;
      }

      .slide-img3 {
        background-image: url("/resources/img/pension3.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-size: 100% 100%;
      }

      #slider button {
        width: 50px;
        height: 100%;
        background-image: url("/resources/img/arrow.png");
        background-repeat: no-repeat;
        background-size: 100%;
        background-position: center;
        border: none;
        background-color: #b6b6b6a1;
        position: absolute;
      }

      #pre {
        top: 0;
        left: 0;
      }

      #next {
        top: 0;
        right: 0;
        transform: rotate(180deg);
      }

      nav {
        width: 100%;
        height: 50px;
        background-color: mediumturquoise;
        position: relative;
        z-index: 100;
      }

      #menu-container {
        display: inline-block;
        position: absolute;
        left: 400px;
      }

      a {
        text-decoration: none;
        color: black;
      }

      ul {
        list-style-type: none;
      }

      .main-menu {
        width: 400px;
      }

      .main-menu li {
        width: 100px;
        height: 50px;
        text-align: center;
        padding: 13px 0;
        background-color: mediumturquoise;
        float: left;
      }

      .main-menu a:link,
      .main-menu a:visited {
        width: 100%;
        height: 100%;
        font-size: 110%;
        font-weight: bold;
        display: inline-block;
      }

      .main-menu a:hover,
      .main-menu a:active {
        color: white;
      }

      .sub-menu-bar {
        width: 400px;
      }

      .sub-menu {
        width: 100px;
        float: left;
      }

      .sub-menu:first-child li {
        visibility: hidden;
      }

      .sub-menu li {
        width: 100px;
        height: 50px;
        text-align: center;
        padding: 13px 0;
        background-color: #deeceb;
      }

      .sub-menu a:link,
      .sub-menu a:visited {
        width: 100%;
        height: 100%;
        font-size: 100%;
        display: inline-block;
      }

      .sub-menu a:hover,
      .sub-menu a:active {
        color: white;
      }

      section {
        width: 1200px;
        padding-top: 60px;
        padding-bottom: 200px;
        display: inline-block;
      }

      article {
        width: 1200px;
        position: relative;
        display: inline-block;
      }

      #cal_pre,
      #cal_next {
        width: 50px;
        height: 100%;
        background-image: url("/resources/img/arrow.png");
        background-repeat: no-repeat;
        background-size: 100%;
        background-position: center;
        background-color: transparent;
        border: none;
        position: absolute;
      }

      #cal_pre {
        top: 0;
        left: 0;
      }

      #cal_next {
        transform: rotate(180deg);
        top: 0;
        right: 0;
      }

      article h2 {
        font-size: 180%;
        text-align: center;
        padding-bottom: 10px;
      }

      article table {
        width: 600px;
        border-collapse: collapse;
        border: 2px solid black;
        text-align: center;
        margin: 0 auto;
      }

      #calender td,
      #calender th {
        border: 1px solid gray;
      }

      #calender th {
        font-size: 110%;
        padding: 5px 0px;
      }

      #calender td {
        width: 100px;
        height: 80px;
        text-align: right;
        vertical-align: top;
        padding: 7px;
      }

      #calender td:hover {
        background-color: #efefef;
      }

      #calender td:active {
        background-color: transparent;
      }

      #calender td:first-child,
      #calender th:first-child {
        color: red;
      }

      #calender td:last-child,
      #calender th:last-child {
        color: blue;
      }

      .disable {
        color: gray !important;
      }

      #booking {
        width: 600px;
        margin: 30px auto;
        text-align: center;
        border-collapse: collapse;
        border: none;
      }

      #booking input {
        outline: none;
        height: 30px;
        border: 1px solid black;
        border-radius: 5px;
      }

      #booking #check-in,
      #booking #check-out {
        width: 140px;
        font-size: 100%;
        text-align: center;
      }

      #booking #count {
        width: 50px;
        font-size: 100%;
        text-align: center;
      }

      #booking button {
        height: 30px;
      }

      #booking #minus,
      #booking #plus {
        width: 30px;
        font-size: 110%;
        font-weight: bold;
        border: none;
      }

      #booking #book {
        height: 60px;
        box-shadow: inset 0px 1px 0px 0px #97c4fe;
        background: linear-gradient(to bottom, #3d94f6 5%, #1e62d0 100%);
        background-color: #3d94f6;
        border-radius: 6px;
        border: 1px solid #337fed;
        display: inline-block;
        cursor: pointer;
        color: white;
        font-size: 110%;
        font-weight: bold;
        padding: 6px 24px;
        text-decoration: none;
        text-shadow: 0px 1px 0px #1570cd;
      }

      #booking #book:hover {
        background: linear-gradient(to bottom, #1e62d0 5%, #3d94f6 100%);
        background-color: #1e62d0;
      }

      footer {
        height: 80px;
        border: 1px solid black;
        background-color: darkblue;
      }

      footer figcaption {
        font-size: 90%;
        padding-top: 5px;
        padding-left: 360px;
      }

      footer p {
        font-size: 90%;
        color: white;
      }
    </style>
    <script src="/resources/lib/jquery-3.6.0.min.js"></script>
    <script>
      var max = 3;
      var width;

      function next() {
        $("#slide-container>div:first-child").animate(
          {
            "margin-left": -width + "px",
          },
          2000,
          function () {
            $("#slide-container").append($(this));
            $(this).css({ "margin-left": "0" });
          }
        );
      }

      function pre() {
        $("#slide-container>div:last-child").css({
          "margin-left": -width + "px",
        });

        $("#slide-container").prepend($("#slide-container>div:last-child"));
        $("#slide-container>div:first-child").animate(
          { "margin-left": "0" },
          2000
        );
      }

      function createCalender(year, month) {
        var date = new Date(year + "-" + month + "-1"); // start date
        var tag = "";
        var end = new Date();
        end.setFullYear(date.getFullYear());
        end.setMonth(date.getMonth() + 1); // next month
        end.setDate(0); // last month last day
        end.setHours(0);
        end.setMinutes(0);
        end.setSeconds(0);

        date.setDate(date.getDate() - date.getDay()); // first lilne sunday date
        end.setDate(end.getDate() + 6 - end.getDay()); // last line saturday date

        // calender lines
        var line = (end.getTime() - date.getTime()) / (1000 * 60 * 60 * 24 * 7);
        for (var i = 0; i < line; i++) {
          tag += "<tr>";
          for (var j = 0; j < 7; j++) {
            if (date.getMonth() !== month - 1) {
              tag += `<td class='disable'>${date.getDate()}</td>`;
            } else {
              tag += `<td>${date.getDate()}</td>`;
            }
            date.setDate(date.getDate() + 1);
          }
          tag += "</tr>";
        }
        return tag;
      }

      $(function () {
        // Slider
        width = $("#slider").width();
        var autoplay = setInterval(next, 2000);

        $("#next").on("click", function () {
          clearInterval(autoplay);
          next();
        });

        $("#pre").on("click", function () {
          clearInterval(autoplay);
          pre();
        });

        // Dropdown Menu
        var flag = false;
        $(".sub-menu").hide();
        $("#menu-container").on("mouseenter", function () {
          if (flag) return;
          $(".sub-menu").slideDown(500, function () {
            flag = true;
          });
        });

        $("#menu-container").on("mouseleave", function () {
          if (!flag) return;
          $(".sub-menu").slideUp(500, function () {
            flag = false;
          });
        });

        $("#menu-container, html").on("click", function () {
          if (!flag) return;
          $(".sub-menu").slideUp(500, function () {
            flag = false;
          });
        });

        // Calender
        var today = new Date();
        today.setDate(1);
        var tag = createCalender(today.getFullYear(), today.getMonth() + 1);
        $("#calender tbody").html(tag);
        $("article > h2").html(
          `${today.getFullYear()}년 ${today.getMonth() + 1}월`
        );
        var sw = true;

        $("#cal_pre").on("click", function () {
          let temp = new Date();
          temp.setDate(1);
          temp.setHours(0);
          temp.setMinutes(0);
          temp.setSeconds(0);
          today.setMonth(today.getMonth() - 1);
          if (today.getTime() < temp.getTime()) {
            today.setMonth(today.getMonth() + 1);
            return;
          }

          let tag = createCalender(today.getFullYear(), today.getMonth() + 1);
          $("#calender tbody").html(tag);
          $("article > h2").html(
            `${today.getFullYear()}년 ${today.getMonth() + 1}월`
          );

          // dynamic elements event handling
          $("#calender td").on("click", function () {
            let cdate = new Date(today);
            if ($(this).parent().index() === 0 && $(this).text() > 7) {
              cdate.setMonth(cdate.getMonth() - 1);
            } else if (
              $(this).parent().index() ===
                $("#calender > tbody > tr").length - 1 &&
              $(this).text() < 7
            ) {
              cdate.setMonth(cdate.getMonth() + 1);
            }

            cdate.setDate($(this).text());
            if (sw) {
              $("#check-in").val(cdate.toISOString().substr(0, 10));
            } else {
              $("#check-out").val(cdate.toISOString().substr(0, 10));
            }
            sw = !sw;
          });
        });

        $("#cal_next").on("click", function () {
          today.setMonth(today.getMonth() + 1);
          let tag = createCalender(today.getFullYear(), today.getMonth() + 1);
          $("#calender tbody").html(tag);
          $("article > h2").html(
            `${today.getFullYear()}년 ${today.getMonth() + 1}월`
          );

          // dynamic elements event handling
          $("#calender td").on("click", function () {
            let cdate = new Date(today);
            if ($(this).parent().index() === 0 && $(this).text() > 7) {
              cdate.setMonth(cdate.getMonth() - 1);
            } else if (
              $(this).parent().index() ===
                $("#calender > tbody > tr").length - 1 &&
              $(this).text() < 7
            ) {
              cdate.setMonth(cdate.getMonth() + 1);
            }

            cdate.setDate($(this).text());
            if (sw) {
              $("#check-in").val(cdate.toISOString().substr(0, 10));
            } else {
              $("#check-out").val(cdate.toISOString().substr(0, 10));
            }
            sw = !sw;
          });
        });

        // Booking
        // var month = today.getMonth() + 1;
        // check-in
        // this event just applied to page loaded point in time
        /* $("#calender td").on("click", function () {
          if (sw === true) {
            $("#check-in").val(
              `${today.getFullYear()}-${month < 10 ? "0" + month : month}-${
                $(this).text() < 10 ? "0" + $(this).text() : $(this).text()
              }`
            );
          } else if (sw === false) {
            $("#check-out").val(
              `${today.getFullYear()}-${month < 10 ? "0" + month : month}-${
                $(this).text() < 10 ? "0" + $(this).text() : $(this).text()
              }`
            );
          }
          sw = !sw;
        }); */
        $("#calender td").on("click", function () {
          let cdate = new Date(today);
          // alert($(this).parent().index() + " " + $("#calender tr").length);
          if ($(this).parent().index() === 0 && $(this).text() > 7) {
            cdate.setMonth(cdate.getMonth() - 1);
          } else if (
            $(this).parent().index() ===
              $("#calender > tbody > tr").length - 1 &&
            $(this).text() < 7
          ) {
            cdate.setMonth(cdate.getMonth() + 1);
          }

          cdate.setDate($(this).text());

          if (sw) {
            $("#check-in").val(cdate.toISOString().substr(0, 10));
          } else {
            $("#check-out").val(cdate.toISOString().substr(0, 10));
          }
          sw = !sw;
        });

        // check-out

        // guest count
        var count = Number($("#count").val());
        $("#minus").on("click", function () {
          if (count > 1) {
            count--;
            $("#count").val(count);
          }
        });

        $("#plus").on("click", function () {
          if (count < 4) {
            count++;
            $("#count").val(count);
          }
        });
      });
    </script>
  </head>
  <body>
    <div id="container">
      <header>
        <div id="profile">
          <figure>
            <img src="/resources/img/profile.png" alt="" />
            <figcaption>
              <h3>OOO 회원님 환영합니다!</h3>
              <p><a href="#">로그아웃</a> | <a href="#">정보수정</a></p>
            </figcaption>
          </figure>
        </div>
      </header>
      <div id="slider">
        <div id="slide">
          <div id="slide-container">
            <div class="slide-img1"></div>
            <div class="slide-img2"></div>
            <div class="slide-img3"></div>
          </div>
        </div>
        <button id="pre"></button>
        <button id="next"></button>
      </div>
      <nav>
        <div id="menu-container">
          <div class="main-menu-bar">
            <ul class="main-menu">
              <li><a href="/20210504/pension_main.html">HOME</a></li>
              <li><a href="#">예약</a></li>
              <li><a href="#">펜션스토리</a></li>
              <li><a href="#">펜션소개</a></li>
            </ul>
          </div>
          <div id="sub-menu-bar">
            <ul class="sub-menu">
              <li><a href=""></a></li>
            </ul>
            <ul class="sub-menu">
              <li><a href="/20210506/pension_sub_2.html">예약하기</a></li>
              <li><a href="#">예약조회</a></li>
            </ul>
            <ul class="sub-menu">
              <li><a href="#">커뮤니티</a></li>
              <li><a href="#">갤러리</a></li>
              <li><a href="#">QnA</a></li>
            </ul>
            <ul class="sub-menu">
              <li><a href="/20210506/pension_sub_1.html">오시는길</a></li>
              <li><a href="#">시설안내</a></li>
            </ul>
          </div>
        </div>
      </nav>
      <section>
        <article>
          <h2>2021년 5월</h2>
          <button id="cal_pre"></button>
          <table id="calender">
            <thead>
              <tr>
                <th>일</th>
                <th>월</th>
                <th>화</th>
                <th>수</th>
                <th>목</th>
                <th>금</th>
                <th>토</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button id="cal_next"></button>
          <form action="">
            <table id="booking">
              <tr>
                <td>체크인</td>
                <td>체크아웃</td>
                <td>숙박인원</td>
                <td rowspan="2">
                  <button id="book">예약하기</button>
                </td>
              </tr>
              <tr>
                <td>
                  <input type="date" id="check-in" />
                </td>
                <td>
                  <input type="date" id="check-out" />
                </td>
                <td>
                  <button type="button" id="minus">-</button>
                  <input type="text" id="count" value="1" readonly />
                  <button type="button" id="plus">+</button>
                </td>
              </tr>
            </table>
          </form>
        </article>
      </section>
    </div>
    <footer>
      <figcaption>
        <p>사업자 번호: OOOOOOOO</p>
        <p>
          연락처:
          <a
            href="tel:000-0000-0000"
            style="color: white; text-decoration: none"
            >000-0000-0000</a
          >
        </p>
        <p>
          이메일:
          <a href="mailto:OOOOO@gmail.com" style="color: white"
            >OOOOO@gmail.com</a
          >
        </p>
        <p>주소: 서울특별시 아무개구 아무개로 000</p>
      </figcaption>
    </footer>
  </body>
</html>
