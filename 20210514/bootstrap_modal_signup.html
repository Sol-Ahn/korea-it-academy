<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Bootstrap Modal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/resources/bootstrap/css/bootstrap.css" />
    <link
      rel="stylesheet"
      href="/resources/bootstrap/css/bootstrap-theme.css"
    />
    <style>
      h4 {
        font-size: 170%;
        font-weight: bold;
        text-align: center;
      }

      .radio {
        margin-left: 10px;
      }

      input[type="radio"] {
        margin-left: 5px;
      }

      #signup {
        font-size: 110%;
        font-weight: bold;
      }
    </style>
    <script src="/resources/lib/jquery-3.6.0.min.js"></script>
    <script src="/resources/bootstrap/js/bootstrap.js"></script>
    <script>
      $(function () {
        $("#signup").click(function () {
          var registerURL = "http://nam2626.dothome.co.kr/register.php";
          /* var id = $("#id").val();
          var passwd = $("#passwd").val();
          var name = $("#name").val();
          var email = `${$("#email").val()}`;
          var host = `${$("#address").val()}`;
          var param = `id=${id}&pass=${passwd}&name=${name}&email=${email}&host=${host}`; */
          var param = $("#frm").serialize();
          $.ajax({
            url: registerURL,
            data: param,
            type: "post",
            dataType: "json",
            success: function (data) {
              alert(data.message);
              if (data.resultCode === "200") {
                $("#close").click();
                $("#frm")[0].reset();
              }
            },
            error: function (xhr, status, error) {
              console.log(
                `code : ${xhr.status}, message : ${xhr.responseText}, error : ${error}`
              );
            },
          });
        });
      });
    </script>
  </head>
  <body>
    <button
      type="button"
      class="btn btn-primary btn-lg"
      data-toggle="modal"
      data-target="#myModal"
    >
      Signup
    </button>

    <div
      class="modal fade"
      id="myModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="myModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="myModalLabel">Signup Page</h4>
          </div>
          <div class="modal-body">
            <form action="" id="frm">
              <div class="form-group">
                <label for="id">ID</label>
                <input
                  type="text"
                  id="id"
                  name="id"
                  class="form-control"
                  placeholder="아이디를 입력하세요."
                />
              </div>
              <div class="form-group">
                <label for="passwd">PW</label>
                <input
                  type="password"
                  id="passwd"
                  name="pass"
                  class="form-control"
                  placeholder="비밀번호를 입력하세요."
                />
              </div>
              <div class="form-group">
                <label for="passwd-check">PW Check</label>
                <input
                  type="password"
                  id="passwd-check"
                  class="form-control"
                  placeholder="비밀번호를 재입력하세요."
                />
              </div>
              <div class="form-group">
                <label for="id">Name</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  class="form-control"
                  placeholder="이름을 입력하세요."
                />
              </div>
              <div class="form-group">
                <label for="email">Email</label>
                <div class="form-inline">
                  <input
                    type="text"
                    id="email"
                    name="email"
                    class="form-control"
                  /><span class="form-control-static">@</span
                  ><select class="form-control" name="host">
                    <option value="1">gmail.com</option>
                    <option value="2">naver.com</option>
                    <option value="3">hanmail.net</option>
                    <option value="0">직접입력</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label for="tos">TOS</label>
                <input
                  type="radio"
                  id="agree"
                  name="optionsRadio"
                  value="agree"
                />
                agree
                <input
                  type="radio"
                  name="optionsRadio"
                  id="disagree"
                  value="disagree"
                />
                disagree
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              id="close"
              class="btn btn-default hidden"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="button" id="signup" class="btn btn-info">
              Signup
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
